# Source this to convert \xHH escapes to something canonical and readable

perl -ni -E '
$line = $_;
while ($line) {
	if ($line =~ /^\\x([a-f0-9]{2})/) {
		$h = hex $1;
		$c = chr($h);
		if ($c ge " " && $c le "~") {
			print $c;
		}
		elsif ($c eq "\n") {
			print q[\n];
		}
		elsif ($c eq "\b") {
			print q[\b];
		}
		else {
			printf q[\%03o], $h;
		}
		$line = substr($line, 4);
	}
	else {
		$line =~ s/(.|\n)//;
		print $1;
	}
}
' session.c
